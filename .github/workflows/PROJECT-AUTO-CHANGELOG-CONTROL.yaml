# ===================================================================
# ë²”ìš© í”„ë¡œì íŠ¸ ìë™ ì²´ì¸ì§€ë¡œê·¸ ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°
# ===================================================================
#
# ì´ ì›Œí¬í”Œë¡œìš°ëŠ” deploy ë¸Œëœì¹˜ë¡œ PRì´ ìƒì„±ë  ë•Œ CodeRabbit AIì˜ ë¦¬ë·°ë¥¼
# ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  íŒŒì‹±í•˜ì—¬ CHANGELOG.jsonê³¼ CHANGELOG.mdë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
#
# ì‘ë™ ë°©ì‹:
# 1. deploy ë¸Œëœì¹˜ë¡œ PR ìƒì„± ì‹œ íŠ¸ë¦¬ê±°
# 2. CodeRabbit Summaryê°€ ìƒì„±ë  ë•Œê¹Œì§€ ìµœëŒ€ 10ë¶„ ëŒ€ê¸°
# 3. Summary ë‚´ìš©ì„ íŒŒì‹±í•˜ì—¬ CHANGELOG íŒŒì¼ë“¤ ì—…ë°ì´íŠ¸
# 4. PR ìë™ ë¨¸ì§€ í›„ deploy ë¸Œëœì¹˜ë¡œ ê°•ì œ í‘¸ì‹œí•˜ì—¬ ë°°í¬ íŠ¸ë¦¬ê±°
#
# ì§€ì› ê¸°ëŠ¥:
# - ë‹¤ì–‘í•œ í”„ë¡œì íŠ¸ íƒ€ì…ì—ì„œ ë²„ì „ ì •ë³´ ìë™ ê°ì§€
# - CodeRabbit Summaryì˜ ë™ì  ì¹´í…Œê³ ë¦¬ íŒŒì‹±
# - JSON ë° Markdown í˜•ì‹ì˜ ì²´ì¸ì§€ë¡œê·¸ ìë™ ìƒì„±
# - PR ìë™ ë¨¸ì§€ ë° ë°°í¬ íŒŒì´í”„ë¼ì¸ íŠ¸ë¦¬ê±°
#
# ===================================================================

name: AUTO UPDATE PROJECT CHANGELOG

on:
  pull_request_target:
    types: [opened, synchronize]
    branches: ["deploy"]

permissions:
  contents: write
  pull-requests: write

jobs:
  # Job 1: CodeRabbit Summary ê°ì§€ ë° íŒŒì‹±
  detect-and-parse:
    name: CodeRabbit Summary ê°ì§€ ë° íŒŒì‹±
    runs-on: ubuntu-latest
    outputs:
      summary_found: ${{ steps.detect_summary.outputs.summary_found }}
      version: ${{ steps.get_version.outputs.version }}
      project_type: ${{ steps.get_version.outputs.project_type }}
    steps:
      - name: CodeRabbit Summary ìš”ì²­ ëŒ“ê¸€ ë‹¬ê¸°
        run: |
          PR_NUMBER=${{ github.event.pull_request.number }}
          curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
               -X POST \
               -d "{\"body\": \"@coderabbit summary\"}" \
               "https://api.github.com/repos/${{ github.repository }}/issues/${PR_NUMBER}/comments"

      - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0
          ref: main

      - name: Git ì„¤ì • ë° ìµœì‹  ìƒíƒœ ë™ê¸°í™”
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git pull origin main

      - name: ë²„ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ ì„¤ì •
        run: |
          if [ -f "scripts/version-manager.sh" ]; then
            chmod +x scripts/version-manager.sh
            echo "âœ… ë²„ì „ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œ ì„¤ì • ì™„ë£Œ"
          else
            echo "âš ï¸ scripts/version-manager.sh íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
          fi

      - name: í˜„ì¬ ë²„ì „ ë° í”„ë¡œì íŠ¸ ì •ë³´ í™•ì¸
        id: get_version
        run: |
          # ë²”ìš© ë²„ì „ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©
          if [ -f "scripts/version-manager.sh" ]; then
            CURRENT_VERSION=$(./scripts/version-manager.sh get | tail -n 1)
            echo "version=$CURRENT_VERSION" >> $GITHUB_OUTPUT

            # í”„ë¡œì íŠ¸ íƒ€ì… í™•ì¸
            if [ -f "version.yml" ]; then
              PROJECT_TYPE=$(grep "^project_type:" version.yml | sed 's/project_type: *"\([^"]*\)".*/\1/')
              echo "project_type=$PROJECT_TYPE" >> $GITHUB_OUTPUT
              echo "âœ… í”„ë¡œì íŠ¸ íƒ€ì…: $PROJECT_TYPE"
            else
              echo "project_type=unknown" >> $GITHUB_OUTPUT
              echo "âš ï¸ version.yml íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
            fi
          else
            # í´ë°±: ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ ë²„ì „ í™•ì¸
            if [ -f "build.gradle" ]; then
              CURRENT_VERSION=$(grep "version = '" build.gradle | sed "s/version = '//" | sed "s/'//")
              echo "project_type=spring" >> $GITHUB_OUTPUT
            elif [ -f "pubspec.yaml" ]; then
              CURRENT_VERSION=$(grep "^version:" pubspec.yaml | sed 's/version: *\([0-9.]*\).*/\1/')
              echo "project_type=flutter" >> $GITHUB_OUTPUT
            elif [ -f "package.json" ]; then
              CURRENT_VERSION=$(grep '"version":' package.json | sed 's/.*"version": *"\([^"]*\)".*/\1/')
              echo "project_type=node" >> $GITHUB_OUTPUT
            else
              CURRENT_VERSION="1.0.0"
              echo "project_type=unknown" >> $GITHUB_OUTPUT
            fi
            echo "version=$CURRENT_VERSION" >> $GITHUB_OUTPUT
            echo "âš ï¸ í´ë°± ëª¨ë“œë¡œ ë²„ì „ í™•ì¸: $CURRENT_VERSION"
          fi

      - name: CodeRabbit Summary ì—…ë°ì´íŠ¸ ê°ì§€ (ìŠ¤ë§ˆíŠ¸ í´ë§)
        id: detect_summary
        run: |
          PR_NUMBER="${{ github.event.pull_request.number }}"
          VERSION="${{ steps.get_version.outputs.version }}"
          PROJECT_TYPE="${{ steps.get_version.outputs.project_type }}"
          TODAY=$(date '+%Y-%m-%d')
          MAX_ATTEMPTS=120  # 10ë¶„ = 120 * 5ì´ˆ
          ATTEMPT=0

          echo "ğŸ” PR #$PR_NUMBERì—ì„œ CodeRabbit Summary ì—…ë°ì´íŠ¸ ê°ì§€ ì‹œì‘..."
          echo "ğŸ“‹ í”„ë¡œì íŠ¸ ì •ë³´: $PROJECT_TYPE v$VERSION"
          echo "â° ìµœëŒ€ ëŒ€ê¸° ì‹œê°„: 10ë¶„ (5ì´ˆë§ˆë‹¤ ì²´í¬)"

          while [ $ATTEMPT -lt $MAX_ATTEMPTS ]; do
            ATTEMPT=$((ATTEMPT + 1))
            echo "[$ATTEMPT/$MAX_ATTEMPTS] CodeRabbit Summary í™•ì¸ ì¤‘... ($(date '+%H:%M:%S'))"

            # GitHub APIë¡œ PR HTML ê°€ì ¸ì˜¤ê¸°
            curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
                 -H "Accept: application/vnd.github.v3.html" \
                 "https://api.github.com/repos/${{ github.repository }}/pulls/${PR_NUMBER}" \
                 > pr_content.html

            # "No description provided" ì²´í¬
            if grep -q "No description provided" pr_content.html; then
              echo "âŒ ì•„ì§ 'No description provided' ìƒíƒœì…ë‹ˆë‹¤"
            elif grep -q "Summary by CodeRabbit" pr_content.html; then
              echo "âœ… CodeRabbit Summary ë°œê²¬! íŒŒì‹±ì„ ì‹œì‘í•©ë‹ˆë‹¤"
              echo "summary_found=true" >> $GITHUB_OUTPUT
              break
            else
              echo "â³ CodeRabbit Summary ì•„ì§ ì—†ìŒ"
            fi

            if [ $ATTEMPT -lt $MAX_ATTEMPTS ]; then
              sleep 5
            fi
          done

          if [ $ATTEMPT -eq $MAX_ATTEMPTS ]; then
            echo "âš ï¸ 10ë¶„ ëŒ€ê¸° í›„ì—ë„ CodeRabbit Summaryë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
            echo "summary_found=false" >> $GITHUB_OUTPUT
          fi

      - name: Summary íŒŒì¼ ì—…ë¡œë“œ (ë‹¤ìŒ Jobì—ì„œ ì‚¬ìš©)
        if: steps.detect_summary.outputs.summary_found == 'true'
        uses: actions/upload-artifact@v4
        with:
          name: pr-content
          path: pr_content.html
          retention-days: 1

  # Job 2: CHANGELOG ì—…ë°ì´íŠ¸ (Job 1 ì™„ë£Œ í›„ ì‹¤í–‰)
  update-changelog:
    name: CHANGELOG ì—…ë°ì´íŠ¸
    runs-on: ubuntu-latest
    needs: detect-and-parse
    if: needs.detect-and-parse.outputs.summary_found == 'true'
    steps:
      - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          fetch-depth: 0
          ref: main

      - name: Git ì„¤ì •
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git pull origin main

      - name: Summary íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        uses: actions/download-artifact@v4
        with:
          name: pr-content

      - name: ë™ì  Summary íŒŒì‹± ë° CHANGELOG.json ì—…ë°ì´íŠ¸
        run: |
          PR_NUMBER="${{ github.event.pull_request.number }}"
          VERSION="${{ needs.detect-and-parse.outputs.version }}"
          PROJECT_TYPE="${{ needs.detect-and-parse.outputs.project_type }}"
          TODAY=$(date '+%Y-%m-%d')
          TIMESTAMP=$(date '+%Y-%m-%dT%H:%M:%SZ')

          echo "ğŸ“ CodeRabbit Summary ë™ì  íŒŒì‹± ì‹œì‘..."
          echo "ğŸ“‹ í”„ë¡œì íŠ¸ ì •ë³´: $PROJECT_TYPE v$VERSION"

          # Summary ì„¹ì…˜ ì¶”ì¶œ
          sed -n '/<h2[^>]*>Summary by CodeRabbit<\/h2>/,/<\/div>/p' pr_content.html > summary_section.html

          # Pythonìœ¼ë¡œ ë™ì  íŒŒì‹±
          cat > parse_changelog.py << 'EOF'
          import re
          import json
          import html
          import sys
          import os
          from datetime import datetime

          def extract_items_from_section(html_content, section_title):
              """íŠ¹ì • ì„¹ì…˜ì˜ ì•„ì´í…œë“¤ì„ ì¶”ì¶œ"""
              print(f"ğŸ“‹ '{section_title}' ì„¹ì…˜ì—ì„œ ì•„ì´í…œ ì¶”ì¶œ ì¤‘...")

              # ë‹¤ì–‘í•œ íŒ¨í„´ìœ¼ë¡œ ì„¹ì…˜ ì°¾ê¸°
              patterns = [
                  f'<strong[^>]*>{re.escape(section_title)}[^<]*</strong>',
                  f'<li[^>]*><strong[^>]*>{re.escape(section_title)}[^<]*</strong>',
                  f'<p[^>]*><strong[^>]*>{re.escape(section_title)}[^<]*</strong></p>'
              ]

              section_match = None
              for pattern in patterns:
                  section_match = re.search(pattern, html_content, re.IGNORECASE)
                  if section_match:
                      print(f"âœ… íŒ¨í„´ ë§¤ì¹˜: {pattern[:50]}...")
                      break

              if not section_match:
                  print(f"âŒ '{section_title}' ì„¹ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
                  return []

              # ì„¹ì…˜ ì´í›„ì˜ ul íƒœê·¸ ì°¾ê¸°
              after_section = html_content[section_match.end():]
              ul_match = re.search(r'<ul[^>]*>(.*?)</ul>', after_section, re.DOTALL)

              if not ul_match:
                  print(f"âŒ '{section_title}' ì„¹ì…˜ ì´í›„ ul íƒœê·¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
                  return []

              # li íƒœê·¸ë“¤ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ
              ul_content = ul_match.group(1)
              li_items = re.findall(r'<li[^>]*>(.*?)</li>', ul_content, re.DOTALL)

              items = []
              for item in li_items:
                  clean_text = re.sub(r'<[^>]*>', '', item)
                  clean_text = html.unescape(clean_text).strip()
                  if clean_text:
                      items.append(clean_text)

              return items

          def detect_categories(html_content):
              """HTMLì—ì„œ ë™ì ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ ê°ì§€"""
              print("ğŸ” HTMLì—ì„œ ì¹´í…Œê³ ë¦¬ ê°ì§€ ì‹œì‘...")
              detected_categories = {}

              # strong íƒœê·¸ ì•ˆì˜ ì¹´í…Œê³ ë¦¬ ì œëª©ë“¤ ì°¾ê¸°
              strong_texts = re.findall(r'<strong[^>]*>([^<]+)</strong>', html_content, re.IGNORECASE)

              for strong_text in strong_texts:
                  clean_text = strong_text.strip()
                  items = extract_items_from_section(html_content, clean_text)
                  if items:
                      safe_key = re.sub(r'[^a-zA-Z0-9ê°€-í£]', '_', clean_text.lower()).strip('_')
                      if not safe_key:
                          safe_key = f"category_{len(detected_categories)}"

                      detected_categories[safe_key] = {
                          'title': clean_text,
                          'items': items
                      }

              return detected_categories

          def main():
              version = os.environ.get('VERSION')
              project_type = os.environ.get('PROJECT_TYPE')
              today = os.environ.get('TODAY')
              pr_number = int(os.environ.get('PR_NUMBER'))
              timestamp = os.environ.get('TIMESTAMP')

              try:
                  with open('summary_section.html', 'r', encoding='utf-8') as f:
                      html_content = f.read()

                  categories = detect_categories(html_content)

                  # Raw summary ì½ê¸°
                  with open('summary_section.html', 'r', encoding='utf-8') as f:
                      raw_summary = re.sub(r'<[^>]*>', '', f.read()).strip()

                  # ìƒˆë¡œìš´ ë¦´ë¦¬ì¦ˆ ì—”íŠ¸ë¦¬ ìƒì„±
                  new_release = {
                      "version": version,
                      "project_type": project_type,
                      "date": today,
                      "pr_number": pr_number,
                      "raw_summary": raw_summary,
                      "parsed_changes": {}
                  }

                  # ë™ì  ì¹´í…Œê³ ë¦¬ë¥¼ parsed_changesì— ì¶”ê°€
                  for key, value in categories.items():
                      new_release["parsed_changes"][key] = value["items"]

                  # CHANGELOG.json ì—…ë°ì´íŠ¸
                  try:
                      with open('CHANGELOG.json', 'r', encoding='utf-8') as f:
                          changelog_data = json.load(f)
                  except (FileNotFoundError, json.JSONDecodeError):
                      changelog_data = {
                          "metadata": {
                              "lastUpdated": timestamp,
                              "currentVersion": version,
                              "projectType": project_type,
                              "totalReleases": 0
                          },
                          "releases": []
                      }

                  # ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸
                  changelog_data["metadata"]["lastUpdated"] = timestamp
                  changelog_data["metadata"]["currentVersion"] = version
                  changelog_data["metadata"]["projectType"] = project_type
                  changelog_data["metadata"]["totalReleases"] = len(changelog_data["releases"]) + 1

                  # ìƒˆ ë¦´ë¦¬ì¦ˆë¥¼ ë§¨ ì•ì— ì¶”ê°€
                  changelog_data["releases"].insert(0, new_release)

                  # íŒŒì¼ ì €ì¥
                  with open('CHANGELOG.json', 'w', encoding='utf-8') as f:
                      json.dump(changelog_data, f, indent=2, ensure_ascii=False)

                  print("âœ… CHANGELOG.json ì—…ë°ì´íŠ¸ ì™„ë£Œ!")

              except Exception as e:
                  print(f"âŒ íŒŒì‹± ì˜¤ë¥˜: {e}")
                  sys.exit(1)

          if __name__ == "__main__":
              main()
          EOF

          # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •í•˜ê³  Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
          export VERSION="$VERSION"
          export PROJECT_TYPE="$PROJECT_TYPE"
          export TODAY="$TODAY"
          export PR_NUMBER="$PR_NUMBER"
          export TIMESTAMP="$TIMESTAMP"

          python3 parse_changelog.py

      - name: CHANGELOG.md ì¬ìƒì„±
        run: |
          echo "ğŸ“„ CHANGELOG.jsonì—ì„œ CHANGELOG.md ì¬ìƒì„± ì¤‘..."

          python3 << 'PYTHON_SCRIPT'
          import json

          try:
              with open('CHANGELOG.json', 'r', encoding='utf-8') as f:
                  data = json.load(f)

              with open('CHANGELOG.md', 'w', encoding='utf-8') as f:
                  f.write("# Changelog\n\n")

                  # ë©”íƒ€ë°ì´í„° ì •ë³´ ì¶”ê°€
                  metadata = data.get('metadata', {})
                  project_type = metadata.get('projectType', 'Unknown')
                  current_version = metadata.get('currentVersion', 'Unknown')
                  last_updated = metadata.get('lastUpdated', 'Unknown')

                  f.write(f"**í”„ë¡œì íŠ¸ íƒ€ì…:** {project_type}  \n")
                  f.write(f"**í˜„ì¬ ë²„ì „:** {current_version}  \n")
                  f.write(f"**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** {last_updated}  \n\n")
                  f.write("---\n\n")

                  for release in data['releases']:
                      f.write(f"## [{release['version']}] - {release['date']}\n\n")

                      # í”„ë¡œì íŠ¸ íƒ€ì… í‘œì‹œ (ìˆëŠ” ê²½ìš°)
                      if 'project_type' in release:
                          f.write(f"**í”„ë¡œì íŠ¸ íƒ€ì…:** {release['project_type']}  \n")

                      # PR ë²ˆí˜¸ í‘œì‹œ
                      if 'pr_number' in release:
                          f.write(f"**PR:** #{release['pr_number']}  \n\n")

                      for category_key, items in release['parsed_changes'].items():
                          if items:
                              if isinstance(items, dict) and 'items' in items:
                                  actual_items = items['items']
                                  title = items['title']
                              else:
                                  actual_items = items
                                  title = category_key.replace('_', ' ').title()

                              f.write(f"**{title}**\n")

                              for item in actual_items:
                                  f.write(f"- {item}\n")
                              f.write("\n")

                      f.write("---\n\n")

              print("âœ… CHANGELOG.md ì¬ìƒì„± ì™„ë£Œ!")

          except Exception as e:
              print(f"âŒ CHANGELOG.md ìƒì„± ì‹¤íŒ¨: {e}")
              exit(1)
          PYTHON_SCRIPT

      - name: ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ë° í‘¸ì‹œ
        run: |
          git add CHANGELOG.json CHANGELOG.md

          if git diff --staged --quiet; then
            echo "ğŸ“ ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤"
          else
            REPO_NAME=$(basename "${{ github.repository }}")
            PROJECT_TYPE="${{ needs.detect-and-parse.outputs.project_type }}"
            VERSION="${{ needs.detect-and-parse.outputs.version }}"

            git commit -m "$REPO_NAME ë²„ì „ ê´€ë¦¬ : docs : v$VERSION ë¦´ë¦¬ì¦ˆ ë¬¸ì„œ ì—…ë°ì´íŠ¸ (PR #${{ github.event.pull_request.number }})"
            git push origin HEAD:main
            echo "âœ… ë³€ê²½ì‚¬í•­ì´ ì„±ê³µì ìœ¼ë¡œ ì»¤ë°‹ë˜ì—ˆìŠµë‹ˆë‹¤"
          fi

      - name: ì •ë¦¬
        run: |
          rm -f summary_section.html parse_changelog.py

  # Job 3: PR ë¨¸ì§€ ë° ë°°í¬ íŠ¸ë¦¬ê±° (Job 2 ì™„ë£Œ í›„ ì‹¤í–‰)
  merge-and-deploy:
    name: PR ë¨¸ì§€ ë° ë°°í¬ íŠ¸ë¦¬ê±°
    runs-on: ubuntu-latest
    needs: [detect-and-parse, update-changelog]
    if: needs.detect-and-parse.outputs.summary_found == 'true'
    steps:
      - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
        with:
          token: ${{ secrets._GITHUB_PAT_TOKEN }}
          fetch-depth: 0

      - name: Git ì„¤ì •
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"

      - name: PR ë¸Œëœì¹˜ ìµœì‹ í™”
        env:
          GH_TOKEN: ${{ secrets._GITHUB_PAT_TOKEN }}
        run: |
          PR_HEAD=$(gh pr view ${{ github.event.pull_request.number }} --json headRefName -q .headRefName)
          git fetch origin $PR_HEAD
          git checkout $PR_HEAD
          git fetch origin deploy:deploy
          git merge --no-edit deploy || true
          git push origin HEAD

      - name: ìë™ PR Merge
        env:
          GH_TOKEN: ${{ secrets._GITHUB_PAT_TOKEN }}
        run: |
          gh pr merge ${{ github.event.pull_request.number }} --merge --admin --body "auto-merge after rebasing"

      - name: Deploy ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ ë° ë°°í¬ íŠ¸ë¦¬ê±°
        run: |
          echo "ğŸš€ Deploy ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ ì‹œì‘..."

          # main â†’ deploy ê°•ì œ í‘¸ì‹œ
          git push origin main:deploy --force

          echo "âœ… Deploy ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ! ë°°í¬ ì›Œí¬í”Œë¡œìš°ê°€ ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤."

      - name: ë°°í¬ ì™„ë£Œ ì•Œë¦¼
        run: |
          echo "ğŸ‰ ì²´ì¸ì§€ë¡œê·¸ ì—…ë°ì´íŠ¸ ë° ë°°í¬ íŠ¸ë¦¬ê±° ì™„ë£Œ!"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“‹ ë°°í¬ ì •ë³´:"
          echo "  â€¢ ë²„ì „: ${{ needs.detect-and-parse.outputs.version }}"
          echo "  â€¢ í”„ë¡œì íŠ¸ íƒ€ì…: ${{ needs.detect-and-parse.outputs.project_type }}"
          echo "  â€¢ PR ë²ˆí˜¸: #${{ github.event.pull_request.number }}"
          echo "  â€¢ ë¸Œëœì¹˜: deploy"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
