<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      data-theme="light">
<head>
    <meta charset="utf-8"/>
    <title>RomRom Admin | <th:block layout:fragment="title">Dashboard</th:block></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>

    <!-- Tailwind CSS 4 -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- DaisyUI 5 -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css"/>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Common CSS -->
    <link rel="stylesheet" th:href="@{/css/common.css}"/>

    <!-- Additional CSS -->
    <th:block layout:fragment="css"></th:block>
</head>
<body class="min-h-screen bg-base-200">

<!-- Drawer Layout -->
<div class="drawer lg:drawer-open">
    <input id="drawer-toggle" type="checkbox" class="drawer-toggle"/>

    <!-- Main Content -->
    <div class="drawer-content flex flex-col">
        <!-- Navbar -->
        <div class="navbar bg-base-100 shadow-sm sticky top-0 z-30">
            <!-- Mobile menu button -->
            <div class="flex-none lg:hidden">
                <label for="drawer-toggle" class="btn btn-square btn-ghost">
                    <i data-lucide="menu" class="size-5"></i>
                </label>
            </div>

            <!-- Page title -->
            <div class="flex-1">
                <h1 class="text-lg font-bold px-2" th:text="${pageTitle}">Dashboard</h1>
            </div>

            <!-- Right side -->
            <div class="flex-none flex items-center gap-2">
                <!-- Dark mode toggle -->
                <label class="swap swap-rotate btn btn-ghost btn-circle">
                    <input type="checkbox" id="themeToggle"/>
                    <i data-lucide="sun" class="swap-off size-5"></i>
                    <i data-lucide="moon" class="swap-on size-5"></i>
                </label>

                <!-- User dropdown -->
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button" class="btn btn-ghost">
                        <i data-lucide="user" class="size-5"></i>
                        <span class="hidden md:inline" th:text="${session.adminUser}">Admin</span>
                        <i data-lucide="chevron-down" class="size-4"></i>
                    </div>
                    <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                        <li>
                            <a href="#" onclick="AdminAuth.logout(); return false;">
                                <i data-lucide="log-out" class="size-4"></i>
                                로그아웃
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Page Content -->
        <main class="p-4 lg:p-6 flex-1">
            <th:block layout:fragment="content"></th:block>
        </main>

        <!-- Footer -->
        <footer class="footer footer-center p-4 bg-base-100 text-base-content border-t border-base-300">
            <aside>
                <p>&copy; 2026 RomRom. All rights reserved.</p>
            </aside>
        </footer>
    </div>

    <!-- Sidebar -->
    <div class="drawer-side z-40">
        <label for="drawer-toggle" aria-label="close sidebar" class="drawer-overlay"></label>
        <aside class="bg-base-100 min-h-full w-64 border-r border-base-300">
            <!-- Logo -->
            <div class="flex items-center gap-3 px-4 py-5 border-b border-base-300">
                <img th:src="@{/assets/img/romrom_logo_192_192.png}" alt="RomRom" class="size-9"/>
                <span class="text-xl font-bold">RomRom</span>
                <span class="badge badge-primary badge-sm">Admin</span>
            </div>

            <!-- Menu -->
            <ul class="menu p-4 gap-1" id="sidebarMenu">
                <li>
                    <a th:href="@{/admin}" th:classappend="${currentMenu == 'dashboard'} ? 'active'">
                        <i data-lucide="layout-dashboard" class="size-5"></i>
                        대시보드
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/members}" th:classappend="${currentMenu == 'members'} ? 'active'">
                        <i data-lucide="users" class="size-5"></i>
                        회원 관리
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/items}" th:classappend="${currentMenu == 'items'} ? 'active'">
                        <i data-lucide="package" class="size-5"></i>
                        물품 관리
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/reports}" th:classappend="${currentMenu == 'reports'} ? 'active'">
                        <i data-lucide="flag" class="size-5"></i>
                        신고 관리
                    </a>
                </li>
                <li>
                    <a th:href="@{/admin/settings}" th:classappend="${currentMenu == 'settings'} ? 'active'">
                        <i data-lucide="settings" class="size-5"></i>
                        설정
                    </a>
                </li>
            </ul>
        </aside>
    </div>
</div>

<!-- Common JS -->
<script th:src="@{/js/common.js}"></script>

<!-- Initialize Lucide Icons -->
<script>
    lucide.createIcons();
</script>

<!-- Additional JS -->
<th:block layout:fragment="js"></th:block>
</body>
</html>
