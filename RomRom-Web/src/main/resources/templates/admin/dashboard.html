<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}">
<head>
    <title layout:fragment="title">ÎåÄÏãúÎ≥¥Îìú</title>
    <th:block layout:fragment="css">
        <!-- ApexCharts -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css" 
              integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" 
              crossorigin="anonymous" />
    </th:block>
</head>
<body>
    <div layout:fragment="content">
        <!-- Info boxes -->
        <div class="row">
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon text-bg-primary shadow-sm">
                        <i class="bi bi-people-fill"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Ï†ÑÏ≤¥ ÌöåÏõê</span>
                        <span class="info-box-number">
                            <span th:text="${totalMembers != null ? totalMembers : 2843}">2843</span>
                            <small class="text-muted">Î™Ö</small>
                        </span>
                        <div class="progress">
                            <div class="progress-bar bg-primary" style="width: 70%"></div>
                        </div>
                        <span class="progress-description">
                            ÏßÄÎÇúÎã¨ ÎåÄÎπÑ <span class="text-success">+12%</span>
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon text-bg-success shadow-sm">
                        <i class="bi bi-box-seam-fill"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Îì±Î°ù Î¨ºÌíà</span>
                        <span class="info-box-number">
                            <span th:text="${totalItems != null ? totalItems : 1567}">1567</span>
                            <small class="text-muted">Í∞ú</small>
                        </span>
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 85%"></div>
                        </div>
                        <span class="progress-description">
                            ÏùºÏùº ÌèâÍ∑† <span class="text-info">52Í∞ú</span> Îì±Î°ù
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon text-bg-warning shadow-sm">
                        <i class="bi bi-currency-exchange"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">ÏßÑÌñâÏ§ëÏù∏ Í±∞Îûò</span>
                        <span class="info-box-number">234</span>
                        <div class="progress">
                            <div class="progress-bar bg-warning" style="width: 60%"></div>
                        </div>
                        <span class="progress-description">
                            ÏôÑÎ£åÏú® <span class="text-warning">78%</span>
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon text-bg-danger shadow-sm">
                        <i class="bi bi-flag-fill"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Ïã†Í≥† Ï†ëÏàò</span>
                        <span class="info-box-number">12</span>
                        <div class="progress">
                            <div class="progress-bar bg-danger" style="width: 20%"></div>
                        </div>
                        <span class="progress-description">
                            Ï≤òÎ¶¨ ÎåÄÍ∏∞ <span class="text-danger">5Í±¥</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main row -->
        <div class="row">
            <!-- Left col -->
            <div class="col-md-8">
                <!-- Monthly Report -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title">ÏõîÍ∞Ñ Í±∞Îûò ÌòÑÌô©</h5>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse">
                                <i class="bi bi-dash-lg"></i>
                            </button>
                            <div class="btn-group">
                                <button type="button" class="btn btn-tool dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="bi bi-gear"></i>
                                </button>
                                <div class="dropdown-menu dropdown-menu-end" role="menu">
                                    <a href="#" class="dropdown-item">ÏùºÍ∞Ñ Î≥¥Í∏∞</a>
                                    <a href="#" class="dropdown-item">Ï£ºÍ∞Ñ Î≥¥Í∏∞</a>
                                    <a href="#" class="dropdown-item">ÏõîÍ∞Ñ Î≥¥Í∏∞</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item">Îã§Ïö¥Î°úÎìú</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <p class="text-center">
                                    <strong>Í±∞Îûò ÌÜµÍ≥Ñ: 2025ÎÖÑ 1Ïõî 1Ïùº - 1Ïõî 29Ïùº</strong>
                                </p>
                                <div id="sales-chart" style="height: 250px;"></div>
                            </div>
                            <div class="col-md-4">
                                <p class="text-center"><strong>Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Í±∞Îûò</strong></p>
                                
                                <div class="progress-group">
                                    Ï†ÑÏûêÍ∏∞Í∏∞
                                    <span class="float-end"><b>320</b>/400</span>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-primary" style="width: 80%"></div>
                                    </div>
                                </div>
                                
                                <div class="progress-group">
                                    ÏùòÎ•ò/Ìå®ÏÖò
                                    <span class="float-end"><b>250</b>/400</span>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-success" style="width: 62%"></div>
                                    </div>
                                </div>
                                
                                <div class="progress-group">
                                    Í∞ÄÍµ¨/Ïù∏ÌÖåÎ¶¨Ïñ¥
                                    <span class="float-end"><b>180</b>/400</span>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-warning" style="width: 45%"></div>
                                    </div>
                                </div>
                                
                                <div class="progress-group">
                                    ÎèÑÏÑú/Î¨∏Íµ¨
                                    <span class="float-end"><b>150</b>/400</span>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-danger" style="width: 37%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="row">
                            <div class="col-md-3 col-6">
                                <div class="text-center border-end">
                                    <span class="text-success">
                                        <i class="bi bi-caret-up-fill"></i> 17%
                                    </span>
                                    <h5 class="fw-bold mb-0">‚Ç©35,210,000</h5>
                                    <span class="text-uppercase text-muted">Ï¥ù Í±∞ÎûòÏï°</span>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="text-center border-end">
                                    <span class="text-info">
                                        <i class="bi bi-caret-left-fill"></i> 0%
                                    </span>
                                    <h5 class="fw-bold mb-0">890</h5>
                                    <span class="text-uppercase text-muted">ÏôÑÎ£å Í±∞Îûò</span>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="text-center border-end">
                                    <span class="text-success">
                                        <i class="bi bi-caret-up-fill"></i> 20%
                                    </span>
                                    <h5 class="fw-bold mb-0">234</h5>
                                    <span class="text-uppercase text-muted">ÏßÑÌñâÏ§ë</span>
                                </div>
                            </div>
                            <div class="col-md-3 col-6">
                                <div class="text-center">
                                    <span class="text-danger">
                                        <i class="bi bi-caret-down-fill"></i> 5%
                                    </span>
                                    <h5 class="fw-bold mb-0">45</h5>
                                    <span class="text-uppercase text-muted">Ï∑®ÏÜå</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Items & Members -->
                <div class="row">
                    <!-- Latest Members -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõê</h3>
                                <div class="card-tools">
                                    <span class="badge bg-danger">8 Ïã†Í∑ú</span>
                                    <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse">
                                        <i class="bi bi-dash-lg"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="row text-center m-1" id="recent-members-container">
                                    <!-- ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõê Îç∞Ïù¥ÌÑ∞Í∞Ä JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                                    <div class="col-12 p-3 text-muted">
                                        <i class="fas fa-spinner fa-spin"></i> ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõêÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer text-center">
                                <a href="/admin/members" class="link-primary">Ï†ÑÏ≤¥ ÌöåÏõê Î≥¥Í∏∞</a>
                            </div>
                        </div>
                    </div>

                    <!-- Latest Items -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">ÏµúÍ∑º Îì±Î°ù Î¨ºÌíà</h3>
                                <div class="card-tools">
                                    <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse">
                                        <i class="bi bi-dash-lg"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body p-2">
                                <div class="row" id="recent-items-container">
                                    <!-- ÏµúÍ∑º Îì±Î°ù Î¨ºÌíà Îç∞Ïù¥ÌÑ∞Í∞Ä JavaScriptÎ°ú ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                                    <div class="col-12 text-center text-muted py-4">
                                        <i class="fas fa-spinner fa-spin fa-2x mb-2"></i>
                                        <div>ÏµúÍ∑º Îì±Î°ù Î¨ºÌíàÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer text-center">
                                <a href="/admin/items" class="text-uppercase">Ï†ÑÏ≤¥ Î¨ºÌíà Î≥¥Í∏∞</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right col -->
            <div class="col-md-4">
                <!-- AI Í∞ÄÍ≤© ÏòàÏ∏° ÌÜµÍ≥Ñ -->
                <div class="info-box mb-3 text-bg-info">
                    <span class="info-box-icon">
                        <i class="bi bi-robot"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">AI Í∞ÄÍ≤© ÏòàÏ∏°</span>
                        <span class="info-box-number">1,234</span>
                        <span class="progress-description">
                            Ï†ïÌôïÎèÑ <strong>87.5%</strong>
                        </span>
                    </div>
                </div>

                <!-- Ï∞ú ÌÜµÍ≥Ñ -->
                <div class="info-box mb-3 text-bg-success">
                    <span class="info-box-icon">
                        <i class="bi bi-heart-fill"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Ï¥ù Ï∞ú Ïàò</span>
                        <span class="info-box-number">5,678</span>
                        <span class="progress-description">
                            ÏùºÌèâÍ∑† <strong>189Í∞ú</strong>
                        </span>
                    </div>
                </div>

                <!-- Ï±ÑÌåÖ ÌÜµÍ≥Ñ -->
                <div class="info-box mb-3 text-bg-warning">
                    <span class="info-box-icon">
                        <i class="bi bi-chat-dots-fill"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">ÌôúÏÑ± Ï±ÑÌåÖ</span>
                        <span class="info-box-number">342</span>
                        <span class="progress-description">
                            ÏùëÎãµÎ•† <strong>92%</strong>
                        </span>
                    </div>
                </div>

                <!-- ÏßÄÏó≠Î≥Ñ Í±∞Îûò ÌòÑÌô© -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ÏßÄÏó≠Î≥Ñ Í±∞Îûò ÌòÑÌô©</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-lte-toggle="card-collapse">
                                <i class="bi bi-dash-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12">
                                <div id="location-chart"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer p-0">
                        <ul class="nav nav-pills flex-column">
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    ÏÑúÏö∏ÌäπÎ≥ÑÏãú
                                    <span class="float-end text-primary">
                                        <i class="bi bi-arrow-up fs-7"></i> 32%
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Í≤ΩÍ∏∞ÎèÑ
                                    <span class="float-end text-success">
                                        <i class="bi bi-arrow-up fs-7"></i> 28%
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú
                                    <span class="float-end text-info">
                                        <i class="bi bi-arrow-left fs-7"></i> 15%
                                    </span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    Ïù∏Ï≤úÍ¥ëÏó≠Ïãú
                                    <span class="float-end text-warning">
                                        <i class="bi bi-arrow-down fs-7"></i> 12%
                                    </span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- ÏµúÍ∑º ÌôúÎèô -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ÏµúÍ∑º ÌôúÎèô</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="bi bi-person-plus text-success"></i>
                                <span class="ms-2">ÏÉà ÌöåÏõê Í∞ÄÏûÖ - ÍπÄÏ≤†Ïàò</span>
                                <span class="text-muted float-end fs-7">5Î∂Ñ Ï†Ñ</span>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-box text-info"></i>
                                <span class="ms-2">Î¨ºÌíà Îì±Î°ù - ÏïÑÏù¥Ìå®Îìú ÌîÑÎ°ú</span>
                                <span class="text-muted float-end fs-7">12Î∂Ñ Ï†Ñ</span>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-check-circle text-success"></i>
                                <span class="ms-2">Í±∞Îûò ÏôÑÎ£å - #TR2024</span>
                                <span class="text-muted float-end fs-7">30Î∂Ñ Ï†Ñ</span>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-flag text-danger"></i>
                                <span class="ms-2">Ïã†Í≥† Ï†ëÏàò - ÏÇ¨Í∏∞ ÏùòÏã¨</span>
                                <span class="text-muted float-end fs-7">1ÏãúÍ∞Ñ Ï†Ñ</span>
                            </li>
                            <li class="mb-2">
                                <i class="bi bi-star text-warning"></i>
                                <span class="ms-2">Î¶¨Î∑∞ ÏûëÏÑ± - ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                <span class="text-muted float-end fs-7">2ÏãúÍ∞Ñ Ï†Ñ</span>
                            </li>
                            <li>
                                <i class="bi bi-robot text-primary"></i>
                                <span class="ms-2">AI Í∞ÄÍ≤© ÏòàÏ∏° ÏôÑÎ£å</span>
                                <span class="text-muted float-end fs-7">3ÏãúÍ∞Ñ Ï†Ñ</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <th:block layout:fragment="js">
        <!-- ApexCharts -->
        <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js" 
                integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" 
                crossorigin="anonymous"></script>
        
        <script>
            // ÏõîÍ∞Ñ Í±∞Îûò Ï∞®Ìä∏
            const salesChartOptions = {
                series: [
                    {
                        name: 'ÏôÑÎ£å Í±∞Îûò',
                        data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 56, 
                               55, 40, 65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 
                               81, 56, 55, 72, 65]
                    },
                    {
                        name: 'Îì±Î°ù Î¨ºÌíà',
                        data: [65, 59, 80, 81, 56, 55, 40, 28, 48, 40, 19, 86, 
                               27, 90, 28, 48, 40, 19, 86, 27, 90, 28, 48, 40, 
                               19, 86, 27, 55, 42]
                    }
                ],
                chart: {
                    height: 250,
                    type: 'area',
                    toolbar: {
                        show: false
                    }
                },
                colors: ['#0d6efd', '#20c997'],
                dataLabels: {
                    enabled: false
                },
                stroke: {
                    curve: 'smooth',
                    width: 2
                },
                xaxis: {
                    categories: Array.from({length: 29}, (_, i) => `1/${i + 1}`),
                    labels: {
                        style: {
                            fontSize: '10px'
                        }
                    }
                },
                yaxis: {
                    title: {
                        text: 'Í±¥Ïàò'
                    }
                },
                tooltip: {
                    x: {
                        format: '1Ïõî ddÏùº'
                    }
                },
                legend: {
                    position: 'top'
                }
            };

            const salesChart = new ApexCharts(
                document.querySelector('#sales-chart'),
                salesChartOptions
            );
            salesChart.render();

            // ÏßÄÏó≠Î≥Ñ Í±∞Îûò ÎèÑÎÑõ Ï∞®Ìä∏
            const locationChartOptions = {
                series: [32, 28, 15, 12, 8, 5],
                chart: {
                    type: 'donut',
                    height: 250
                },
                labels: ['ÏÑúÏö∏', 'Í≤ΩÍ∏∞', 'Î∂ÄÏÇ∞', 'Ïù∏Ï≤ú', 'ÎåÄÍµ¨', 'Í∏∞ÌÉÄ'],
                dataLabels: {
                    enabled: false
                },
                colors: ['#0d6efd', '#20c997', '#ffc107', '#dc3545', '#6f42c1', '#adb5bd'],
                legend: {
                    position: 'bottom',
                    fontSize: '12px'
                },
                responsive: [{
                    breakpoint: 480,
                    options: {
                        chart: {
                            width: 200
                        },
                        legend: {
                            position: 'bottom'
                        }
                    }
                }]
            };

            const locationChart = new ApexCharts(
                document.querySelector('#location-chart'),
                locationChartOptions
            );
            locationChart.render();

            // ÎåÄÏãúÎ≥¥Îìú Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            function loadDashboardData() {
                console.log('üöÄ loadDashboardData Ìï®Ïàò Ìò∏Ï∂úÎê®');
                loadRecentMembers();
                loadRecentItems();
            }

            // ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõê Î°úÎìú
            function loadRecentMembers() {
                console.log('üë• loadRecentMembers Ìï®Ïàò Ìò∏Ï∂úÎê®');
                const formData = new FormData();
                formData.append('action', 'recent-members');

                console.log('üì§ ÏµúÍ∑º ÌöåÏõê fetch ÏöîÏ≤≠ ÏãúÏûë');
                fetch('/admin/api/dashboard', {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.members && data.members.content) {
                        renderRecentMembers(data.members.content);
                        updateMembersBadge(data.members.content.length);
                    }
                })
                .catch(error => {
                    console.error('ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõê Î°úÎìú Ïò§Î•ò:', error);
                });
            }

            // ÏµúÍ∑º Îì±Î°ù Î¨ºÌíà Î°úÎìú
            function loadRecentItems() {
                console.log('üì¶ loadRecentItems Ìï®Ïàò Ìò∏Ï∂úÎê®');
                const formData = new FormData();
                formData.append('action', 'recent-items');

                console.log('üì§ ÏµúÍ∑º Î¨ºÌíà fetch ÏöîÏ≤≠ ÏãúÏûë');
                fetch('/admin/api/dashboard', {
                    method: 'POST',
                    body: formData
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.items && data.items.content) {
                        renderRecentItems(data.items.content);
                    }
                })
                .catch(error => {
                    console.error('ÏµúÍ∑º Îì±Î°ù Î¨ºÌíà Î°úÎìú Ïò§Î•ò:', error);
                });
            }

            // ÏµúÍ∑º Í∞ÄÏûÖ ÌöåÏõê Î†åÎçîÎßÅ
            function renderRecentMembers(members) {
                const container = document.getElementById('recent-members-container');
                if (!container || !members || members.length === 0) {
                    if (container) {
                        container.innerHTML = '<div class="col-12 p-3 text-muted">Îì±Î°ùÎêú ÌöåÏõêÏù¥ ÏóÜÏäµÎãàÎã§.</div>';
                    }
                    return;
                }

                container.innerHTML = '';

                members.forEach(member => {
                    const profileImage = member.profileUrl || '/assets/img/default-150x150.png';
                    const memberHtml = `
                        <div class="col-3 p-2">
                            <img class="img-fluid rounded-circle" src="${profileImage}" alt="User Image" style="width: 50px; height: 50px; object-fit: cover;" />
                            <a class="btn fw-bold fs-7 text-secondary text-truncate w-100 p-0" href="#" title="${member.nickname || 'ÏùµÎ™Ö'}">
                                ${member.nickname || 'ÏùµÎ™Ö'}
                            </a>
                            <div class="fs-8">${TimeUtils.getRelativeTime(member.createdDate)}</div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', memberHtml);
                });
            }

            // ÏµúÍ∑º Îì±Î°ù Î¨ºÌíà Î†åÎçîÎßÅ
            function renderRecentItems(items) {
                const container = document.getElementById('recent-items-container');
                if (!container || !items || items.length === 0) {
                    if (container) {
                        container.innerHTML = `
                            <div class="col-12 text-center text-muted py-4">
                                <i class="fas fa-box-open fa-2x mb-2"></i>
                                <div>Îì±Î°ùÎêú Î¨ºÌíàÏù¥ ÏóÜÏäµÎãàÎã§.</div>
                            </div>
                        `;
                    }
                    return;
                }

                container.innerHTML = '';

                items.forEach((item, index) => {
                    const categoryIcons = {
                        'ELECTRONICS': 'fas fa-laptop',
                        'WOMEN_CLOTHING': 'fas fa-tshirt',
                        'MEN_CLOTHING': 'fas fa-tshirt',
                        'BOOKS': 'fas fa-book',
                        'HOUSEHOLD': 'fas fa-home',
                        'SPORTS': 'fas fa-dumbbell',
                        'BEAUTY': 'fas fa-spa',
                        'FURNITURE': 'fas fa-couch',
                        'FOOD': 'fas fa-utensils',
                        'TOYS': 'fas fa-gamepad',
                        'OTHERS': 'fas fa-box'
                    };

                    const statusColors = {
                        'AVAILABLE': 'success',
                        'RESERVED': 'warning',
                        'SOLD': 'danger',
                        'HIDDEN': 'secondary'
                    };

                    const categoryIcon = categoryIcons[item.itemCategory] || 'fas fa-box';
                    const statusColor = statusColors[item.itemStatus] || 'success';
                    const statusText = {
                        'AVAILABLE': 'ÌåêÎß§Ï§ë',
                        'RESERVED': 'ÏòàÏïΩÏ§ë',
                        'SOLD': 'ÌåêÎß§ÏôÑÎ£å',
                        'HIDDEN': 'Ïà®ÍπÄ'
                    }[item.itemStatus] || 'ÌåêÎß§Ï§ë';

                    const itemHtml = `
                        <div class="col-md-6 mb-3">
                            <div class="card card-outline card-${statusColor} h-100">
                                <div class="card-body p-3">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="position-relative">
                                                <img src="${item.mainImageUrl || '/assets/img/default-150x150.png'}" 
                                                     alt="Product Image" 
                                                     class="img-fluid rounded" 
                                                     style="width: 100%; height: 80px; object-fit: cover;">
                                                <span class="position-absolute top-0 end-0 badge bg-${statusColor} rounded-pill m-1" style="font-size: 0.65rem;">
                                                    ${statusText}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-8">
                                            <div class="d-flex justify-content-between align-items-start mb-1">
                                                <h6 class="card-title mb-1 text-truncate" style="max-width: 120px;" title="${item.itemName}">
                                                    <i class="${categoryIcon} me-1 text-muted" style="font-size: 0.9rem;"></i>
                                                    ${item.itemName}
                                                </h6>
                                            </div>
                                            <div class="mb-2">
                                                <span class="badge bg-primary fs-6">${NumberUtils.formatPrice(item.price)}</span>
                                                <small class="text-muted ms-1">‚ù§Ô∏è ${item.likeCount || 0}</small>
                                            </div>
                                            <p class="card-text text-muted small mb-1" style="font-size: 0.75rem; line-height: 1.2;">
                                                ${(item.itemDescription || 'ÏÑ§Î™Ö ÏóÜÏùå').length > 40 ? 
                                                  (item.itemDescription || 'ÏÑ§Î™Ö ÏóÜÏùå').substring(0, 40) + '...' : 
                                                  (item.itemDescription || 'ÏÑ§Î™Ö ÏóÜÏùå')}
                                            </p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">
                                                    <i class="fas fa-user me-1"></i>${item.sellerNickname || 'ÏùµÎ™Ö'}
                                                </small>
                                                <small class="text-muted">
                                                    <i class="fas fa-clock me-1"></i>${TimeUtils.getRelativeTime(item.createdDate)}
                                                </small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', itemHtml);
                });
            }

            // ÌöåÏõê Î∞∞ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
            function updateMembersBadge(count) {
                const badge = document.querySelector('.card-header .badge.bg-danger');
                if (badge) {
                    badge.textContent = `${count} Ïã†Í∑ú`;
                }
            }

            // ÎåÄÏãúÎ≥¥Îìú Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìñâ
            loadDashboardData();
        </script>
    </th:block>
</body>
</html>